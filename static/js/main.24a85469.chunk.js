(this["webpackJsonplookiero-twitter"]=this["webpackJsonplookiero-twitter"]||[]).push([[0],{145:function(e,t,a){e.exports=a(1462)},1461:function(e,t,a){},1462:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),l=a.n(o),i=a(22),c=a(1490),u=a(136),s=a(1489),d=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,f=Object(u.a)({palette:{primary:{main:"#fff3e0"},secondary:{main:"#fce4ec"},type:d?"dark":"light"}}),m=function(e){return r.a.createElement(s.a,{theme:f},r.a.createElement(c.a,null),e.children)},h=a(1514),p=a(1492),g=a(1493),E=a(1494),b=a(1495),v=a(1496),w=a(134),y=a(84),x=a(94),j=a(86),O=a(95),k=function(e){Object(j.a)(a,e);var t=Object(x.a)(a);function a(e,n){var r;return Object(y.a)(this,a),(r=t.call(this,e)).props=n,r}return a}(Object(O.a)(Error)),I=a(133),U=new(a.n(I).a)({en:{latestPosts:"Latest posts",home:"Home",notFollowingAnybodySelf:"You are not following anybody yet. Let's change it!",notFollowingAnybody:"The user is not following anybody",addPeople:"Add People",searchPeopleInput:"Search people",follow:"Follow",unfollow:"Unfollow",whatsHappening:"What's happening?",post:"Post",somethingWentWrong:"Something went wrong",reloadPage:"Please reload the page",reload:"Reload",userNotFound:"User not found",emptyUsers:"No users",userNotFoundDescription:"You are probably opening a profile of a user which does not exist anymore because the database is refreshed on every run.",following:"Following",noPosts:"No posts"}}),C=function(e){var t=e.children;return r.a.createElement(w.ErrorBoundary,{FallbackComponent:N,onReset:function(){window.location="/"},onError:function(){console.info("Sending error to external logging service.")}},t)},N=function(e){var t=e.error,a=e.resetErrorBoundary,n=U.somethingWentWrong,o=U.reloadPage;return t instanceof k&&(n=t.props.heading,o=t.props.text),r.a.createElement(h.a,{open:!0,disableBackdropClick:!0,disableEscapeKeyDown:!0,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",maxWidth:"xs",fullWidth:!0},r.a.createElement(p.a,{id:"alert-dialog-title"},n),r.a.createElement(g.a,null,r.a.createElement(E.a,{id:"alert-dialog-description"},o)),r.a.createElement(b.a,null,r.a.createElement(v.a,{onClick:a,autoFocus:!0},U.reload)))},P=a(1516),S=a(1497),B=a(1498),D=a(54),F=a(1499),W=a(1515),T=a(1500),A=a(24),L=a(17),M=a(16),J=a(28),Q=a(9),H=a.n(Q),_=a(41),q=a(135),R=r.a.createContext(null),G=function(){return r.a.useContext(R)},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.d)(["users",e],function(){var e=Object(_.a)(H.a.mark((function e(a,n){var r,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/users",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});case 2:return r=e.sent,e.next=5,r.json();case 5:if(o=e.sent,!t.unique){e.next=10;break}if(1===o.length){e.next=9;break}throw new Error("Error fetching user");case 9:return e.abrupt("return",o[0]);case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),{enabled:!t.manual})},K=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Y(e,Object(J.a)({},t,{unique:!0}))},$=function(e){return"/".concat(e.handle)},z=function(e){return[e.firstName,e.lastName].join(" ")},V=function(e){var t=X(),a=G();return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{position:"fixed",color:"default"},r.a.createElement(B.a,null,e.leftButton&&r.a.createElement(e.leftButton,null),r.a.createElement(D.a,{variant:"h6",className:t.title},e.title),a&&r.a.createElement(F.a,{to:$(a),color:"inherit",component:A.b,role:"link","aria-label":"logged user"},r.a.createElement(W.a,{src:a.avatar})))))},X=Object(T.a)((function(e){return{root:{flexGrow:1},leftButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.a.createElement(P.a,{display:"flex",flexDirection:"column",height:1},r.a.createElement(V,e.header),r.a.createElement(P.a,{flex:"0 1 auto"},r.a.createElement(P.a,{height:64})),r.a.createElement(P.a,{display:"flex",flex:"1 1 auto",justifyContent:"center",p:1},e.children))},ee=function(e){var t=e.children,a=K({id:1}),n=R.Provider;if(a.isLoading)return r.a.createElement(Z,null);if(a.isError)throw new k("Logged user not found",{heading:"Ooops",text:"Logged user not found"});return r.a.createElement(n,{value:a.data},t)},te=a(103),ae=a(51),ne=a(107),re=function(){return window.__lookiterDb||(window.__lookiterDb={}),window.__lookiterDb},oe=function(e,t){return e.filter((function(e){return!Object.keys(t).some((function(a){return void 0!==t[a]&&(Array.isArray(t[a])?!t[a].includes(e[a]):e[a]!==t[a])}))}))},le=function(e,t){return Math.floor(Math.random()*(t-e)+e)},ie=function(e){var t=e.body;try{t=JSON.parse(e.body)}catch(a){}return t},ce=function(e){return function(t,a,n){return new Promise((function(r){setTimeout((function(){return r(a(n.json(e(t,a,n))))}),ue())}))}},ue=function(){return le(5,1e3)},se=a(35),de=a.n(se),fe=function(){var e=re();e.users=Object(M.a)(Array(10).keys()).map((function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(J.a)({id:1,firstName:de.a.name.firstName(),lastName:de.a.name.lastName(),handle:de.a.internet.userName(),avatar:de.a.image.avatar(),followingUserIds:[]},e)}({id:e+1,followingUserIds:[]})})),e.posts=e.users.reduce((function(e,t){var a=t.id;return[].concat(Object(M.a)(e),Object(M.a)(Object(M.a)(Array(5).keys()).map((function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(J.a)({id:1,authorUserId:1,text:de.a.lorem.sentence(),createdTime:de.a.date.past()},e)}({id:t+e.length+1,authorUserId:a})}))))}),[]),console.log("\ud83d\udece ","db",e)},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fulltext,a=Object(ne.a)(e,["fulltext"]),n=oe(re().users,a);return t&&(n=n.filter((function(e){return[e.firstName,e.lastName,e.handle].map((function(e){return e.toLowerCase()})).some((function(e){return e.includes(t.toLowerCase())}))}))),n},he=[ae.c.post("*/users",ce((function(e){return me(ie(e))}))),ae.c.put("*/users",ce((function(e){return function(e){var t=e.id,a=Object(ne.a)(e,["id"]),n=me({id:t})[0];return Object.assign(n,a),{success:!0}}(ie(e))}))),ae.c.post("*/posts",ce((function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.authorUserId,a=oe(re().posts,{authorUserId:t}),n=a.map((function(e){var t=me({id:e.authorUserId}).pop();return Object(J.a)({},e,{author:t})}));return n.sort((function(e,t){return e.createdTime>t.createdTime?-1:1})),n}(ie(e))}))),ae.c.put("*/posts",ce((function(e){return t=ie(e),re().posts.push(Object(J.a)({},t,{id:re().posts.length+1,createdTime:new Date})),{success:!0};var t}))),ae.c.get("*/followers/:id",ce((function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return oe(re().users,{id:t})[0]}((t=e.params,Object.keys(t).reduce((function(e,a){return e[a]=parseInt(t[a]),e}),{})));var t})))],pe=a(14),ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=K({id:e.userId}),a=Y({id:t.data&&t.data.followingUserIds},{manual:!0});return t.data&&!a.data&&a.refetch(),a},Ee=a(1502),be=a(1503),ve=a(1504),we=a(1505),ye=a(1506),xe=function(e){var t=G(),a=function(){var e=G(),t=["users",{id:e.id}],a=["posts",{authorUserId:[e.id].concat(Object(M.a)(e.followingUserIds))}],n=Object(i.c)(function(){var t=Object(_.a)(H.a.mark((function t(a){var n,r;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(J.a)({id:e.id},a),t.next=3,fetch("/users",{method:"PUT",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});case 3:return r=t.sent,t.abrupt("return",r.json());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{onMutate:function(e){i.b.cancelQueries(t);var a=i.b.getQueryData(t),n=Object(q.a)(a,(function(t){Object.assign(t,e)}));return i.b.setQueryData(t,n),{loggedUserData:a}},onError:function(e,a,n){var r=n.loggedUserData;i.b.setQueryData(t,r)},onSettled:function(){i.b.invalidateQueries(t,{refetchActive:!1}),i.b.invalidateQueries(a)}});return Object(L.a)(n,1)[0]}(),n=Object(pe.g)(),o=function(e){return t.followingUserIds.includes(e)};return e.users.length?r.a.createElement(Ee.a,{style:{width:"100%"}},e.users.map((function(l){return r.a.createElement(be.a,{key:l.id,onClick:function(){return n.push($(l))},style:{cursor:"pointer"}},r.a.createElement(ve.a,null,r.a.createElement(W.a,{src:l.avatar})),r.a.createElement(we.a,null,r.a.createElement(D.a,null,z(l)),r.a.createElement(D.a,null,"@",l.handle)),!e.hideButton&&r.a.createElement(ye.a,null,r.a.createElement(v.a,{variant:"outlined",onClick:(i=l.id,function(){var e=t.followingUserIds;e=o(i)?e.filter((function(e){return e!==i})):[].concat(Object(M.a)(t.followingUserIds),[i]),a({followingUserIds:e})})},o(l.id)?U.unfollow:U.follow)));var i}))):r.a.createElement(P.a,{display:"flex",justifyContent:"center",my:3},e.emptyMessage||U.emptyUsers)},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ge(e.filter);return t.isLoading||!t.data?"":r.a.createElement(P.a,{display:"flex",flexDirection:"column",width:1,alignItems:"center"},r.a.createElement(P.a,{width:1,maxHeight:e.maxHeight,overflow:"scroll"},r.a.createElement(xe,{users:t.data,emptyMessage:e.emptyMessage,hideButton:e.hideButton})),e.canEdit&&r.a.createElement(P.a,{display:"flex",justifyContent:"center",marginTop:1},r.a.createElement(v.a,{variant:"contained",to:"/search-people",component:A.b,"aria-label":"add people"},U.addPeople)))},Oe=a(1517),ke=function(e){var t=Object(pe.g)();return r.a.createElement(F.a,{onClick:t.goBack,role:"button","aria-label":"back"},r.a.createElement(Oe.a,null))},Ie=function(){var e=G(),t=Object(pe.h)().handle,a=K({handle:t});if(a.isError)throw new k(a.error.message,{heading:U.userNotFound,text:U.userNotFoundDescription});return r.a.createElement(Z,{header:{leftButton:ke,title:U.following}},a.data&&r.a.createElement(je,{filter:{userId:a.data.id},canEdit:a.data.id===e.id,emptyMessage:a.data.id===e.id?U.notFollowingAnybodySelf:U.notFollowingAnybody}))},Ue=a(1507),Ce=function(e){return r.a.createElement(P.a,{my:2,display:"flex",role:"listitem","aria-label":"tweet"},r.a.createElement(P.a,{display:"flex",justifyContent:"center",width:80},e.avatar()),r.a.createElement(P.a,{width:1},r.a.createElement(P.a,{display:"flex"},e.name(),r.a.createElement(P.a,{marginLeft:1},e.handle())),e.text()))},Ne=function(e){var t=[e.author.firstName,e.author.lastName].filter(Boolean).join(" ");return r.a.createElement(Ce,{avatar:function(){return r.a.createElement(W.a,{src:e.author.avatar})},name:function(){return r.a.createElement(Ue.a,{to:$(e.author),component:A.b,color:"inherit"},r.a.createElement(D.a,{component:"strong",style:{fontWeight:600}},t))},handle:function(){return r.a.createElement(D.a,{role:"link","aria-label":"handle"},"@",e.author.handle)},text:function(){return r.a.createElement(D.a,null,e.text)}})},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.d)(["posts",e],function(){var e=Object(_.a)(H.a.mark((function e(t,a){var n,r,o,l;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.userId,r=a.authorUserId,o=Object(J.a)({},n&&{userId:n},{},r&&{authorUserId:r}),e.next=4,fetch("/posts",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}});case 4:return l=e.sent,e.abrupt("return",l.json());case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),{retry:0})},Se=a(25),Be=a(106),De=a(1508),Fe=function(e){var t=Object(Se.a)();return r.a.createElement(Ce,{avatar:function(){return r.a.createElement(De.a,{variant:"circle",width:Object(Be.styles)(t).root.width,height:Object(Be.styles)(t).root.height})},name:function(){return r.a.createElement(De.a,{variant:"text",width:le(60,120)})},handle:function(){return r.a.createElement(De.a,{variant:"text",width:le(60,120)})},text:function(){return r.a.createElement(De.a,{variant:"text",width:"".concat(le(30,90),"%")})}})},We=function(){return Object(M.a)(Array(5).keys()).map((function(e){return r.a.createElement(Fe,{key:e})}))},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Pe(e.filter);return t.isLoading?r.a.createElement(We,null):0===t.data.length?e.empty?e.empty():U.noPosts:r.a.createElement(r.a.Fragment,null,t.data.map((function(e){return r.a.createElement(Ne,Object.assign({key:e.id},e))})))},Ae=function(){var e=Object(pe.h)().handle,t=K({handle:e});if(t.isError)throw new k(t.error.message,{heading:U.userNotFound,text:U.userNotFoundDescription});return r.a.createElement(Z,{header:{leftButton:ke}},t.data&&r.a.createElement(P.a,{width:1,maxWidth:600},r.a.createElement(P.a,{display:"flex",justifyContent:"center",my:1},r.a.createElement(W.a,{src:t.data.avatar,style:{height:"150px",width:"150px"}})),r.a.createElement(D.a,{variant:"h4"},z(t.data)),r.a.createElement(D.a,{role:"term","aria-label":"handle"},"@",t.data.handle),r.a.createElement(Ue.a,{to:"".concat($(t.data),"/following"),color:"inherit",component:A.b,"aria-label":"following"},r.a.createElement(D.a,{component:"span"},r.a.createElement("strong",null,t.data.followingUserIds.length)," ",U.following)),r.a.createElement(Te,{filter:{authorUserId:[t.data.id]}})))},Le=a(1511),Me=function(){var e=G(),t=r.a.useState(""),a=Object(L.a)(t,2),n=a[0],o=a[1],l=Y({fulltext:n},{manual:!0}),i=l.refetch;return r.a.useEffect((function(){n&&i()}),[n,i]),r.a.createElement(P.a,{display:"flex",flexDirection:"column",width:1,alignItems:"center"},r.a.createElement(Le.a,{value:n,onChange:function(e){var t=e.target;o(t.value)},label:U.searchPeopleInput,role:"textbox","aria-label":U.searchPeopleInput}),l.isLoading||n&&!l.data?r.a.createElement(P.a,{width:1},r.a.createElement(We,null)):n&&r.a.createElement(xe,{users:l.data.filter((function(t){return t.id!==e.id}))}))},Je=function(){return r.a.createElement(Z,{header:{leftButton:ke,title:U.addPeople}},r.a.createElement(P.a,{width:1,maxWidth:600},r.a.createElement(Me,null)))},Qe=a(1510),He=a(1513),_e=a(1509),qe=function(e){var t=G(),a=function(){var e=G(),t=Object(i.c)(function(){var t=Object(_.a)(H.a.mark((function t(a){var n,r;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={text:a,authorUserId:e.id},t.next=3,fetch("/posts",{method:"PUT",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});case 3:return r=t.sent,t.abrupt("return",r.json());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{onSuccess:function(){i.b.invalidateQueries(["posts",{authorUserId:[e.id].concat(Object(M.a)(e.followingUserIds))}])}});return Object(L.a)(t,1)[0]}(),n=r.a.useState(""),o=Object(L.a)(n,2),l=o[0],c=o[1];return r.a.useEffect((function(){}),[l]),r.a.createElement(P.a,{display:"flex"},r.a.createElement(P.a,{display:"flex",justifyContent:"center",width:"80px"},r.a.createElement(W.a,{src:t.avatar})),r.a.createElement(P.a,{width:1},r.a.createElement(_e.a,{value:l,rowsMax:3,"aria-label":"Create post",placeholder:U.whatsHappening,onChange:function(e){var t=e.target;c(t.value)},style:{width:"100%",padding:"10px 0px 10px 0px",border:"none"}}),r.a.createElement(P.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement(v.a,{variant:"outlined",onClick:function(){a(l),c("")},disabled:!l,role:"button","aria-label":"publish"},U.post))))},Re=function(){var e=G();return r.a.createElement(Z,{header:{title:U.home}},r.a.createElement(Qe.a,{container:!0,justify:"center",spacing:3},r.a.createElement(Qe.a,{item:!0,xs:!0,style:{maxWidth:"600px"}},r.a.createElement(P.a,{py:2},r.a.createElement(qe,null)),r.a.createElement(Te,{filter:{authorUserId:[e.id].concat(Object(M.a)(e.followingUserIds))},empty:function(){return r.a.createElement(je,{filter:{userId:e.id}})}})),r.a.createElement(He.a,{smDown:!0},r.a.createElement(Qe.a,{item:!0,md:4},r.a.createElement(D.a,{variant:"h6"},U.following),r.a.createElement(je,{filter:{userId:e.id},canEdit:!0,hideButton:!0,maxHeight:300})))))},Ge=function(){return r.a.createElement(A.a,{basename:"/lookitter"},r.a.createElement(pe.d,null,r.a.createElement(pe.b,{exact:!0,path:"/"},r.a.createElement(Re,null)),r.a.createElement(pe.b,{path:"/search-people"},r.a.createElement(Je,null)),r.a.createElement(pe.b,{path:"/:handle/following"},r.a.createElement(Ie,null)),r.a.createElement(pe.b,{path:"/:handle"},r.a.createElement(Ae,null)),r.a.createElement(pe.a,{to:"/"})))};!function(){var e=te.a.apply(void 0,Object(M.a)(he));e.start({serviceWorker:{url:"".concat("/lookitter","/mockServiceWorker.js")}}),fe(),window.msw={worker:e,rest:ae.c}}();var Ye={queries:{retry:0,refetchOnWindowFocus:!1}},Ke=function(){return r.a.createElement(m,null,r.a.createElement(C,null,r.a.createElement(i.a,{config:Ye},r.a.createElement(ee,null,r.a.createElement(Ge,null)))))};a(1461),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ke,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[145,1,2]]]);
//# sourceMappingURL=main.24a85469.chunk.js.map